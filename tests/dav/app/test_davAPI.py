import unittest
from datetime import datetime

from aqxWeb import run
from aqxWeb.dav import analyticsViews
from aqxWeb.dav.app.davAPI import DavAPI

import json
from aqxWeb.dav.dao.UserDAO import UserDAO

# test DAV Api calls


class DavApiTest(unittest.TestCase):
    def setUp(self):
        self.app = run.app.test_client()
        analyticsViews.init_app(run.app)
        self.conn = analyticsViews.get_conn()

    def tearDown(self):
        #u = UserDAO(self.conn)
        #u.delete_user("98763454054654")
        pass

    #get all systems
    def test_get_all_systems_info(self):
        response = self.app.get('/dav/aqxapi/get/systems/metadata')
        print(response)
        result = json.loads(response.data)
        self.assertNotEqual(len(result), 0, 'systems exist')

    #get all measurement types
    def test_get_all_measurement_names(self):
        response = self.app.get('/dav/aqxapi/get/system/measurement_types')
        result = json.loads(response.data)
        self.assertNotEqual(len(result), 0, 'measurements exist')

    #insert user data
    '''def test_put_user(self):
        response=self.app.post('/dav/aqxapi/put/user',
                       data=json.dumps(dict(googleid='98763454054654',
                                            email='test@test.com',
                                            lat=0,
                                            long=0)),
                       content_type = 'application/json')
        result = json.loads(response.data)
        self.assertNotEqual(len(result), 0, 'systems exist')'''


    # insert system measurement - current time
    def test_put_system_measurement_new(self):
        time_now = datetime.now()
        print time_now
        response = self.app.post('dav/aqxapi/put/system/measurement',
                                 data=json.dumps(dict(system_uid='555d0cfe9ebc11e58153000c29b92d09',
                                                        measurement_id='5',
                                                        time=str(time_now),
                                                        value='111')),
                                 content_type = 'application/json')
        result = json.loads(response.data)
        status = result['status']
        message = str(status['message'])
        self.assertEqual(message, "Record successfully inserted", "Test fail")

        # insert system measurement - already present time
    def test_put_system_measurement_already_recorded(self):
        response = self.app.post('dav/aqxapi/put/system/measurement',
                                 data=json.dumps(dict(system_uid='555d0cfe9ebc11e58153000c29b92d09',
                                                        measurement_id='5',
                                                        time='2018-03-19 23:28:57',
                                                        value='111')),
                                 content_type = 'application/json')
        result = json.loads(response.data)
        status = result['status']
        message = str(status['message'])
        self.assertEqual(message, "Value at the given time already recorded", "Test fail")

    # method to insert test data
    def test_generate_data(self):
        davAPI = DavAPI(self.conn)
        davAPI.generate_data(0,10,
                  ['5cc8402478ee11e59d5c000c29b92d09'],
                 # ['o2','ph','temp','alkalinity','ammonium','chlorine','hardness','light','nitrate'])
                             ['light'])
        self.assertEqual("", "", "Test fail")


    ###  get the readings for plot TESTCASES
    #1  data present for O2 for "5cc8402478ee11e59d5c000c29b92d09"

    def test_get_readings_for_plot1(self):
        # data ={}
        # data["system_uid_list"] = ["5cc8402478ee11e59d5c000c29b92d09"]
        # data["measurement_id_list"] = ['8']
        #response = self.app.post('dav/aqxapi/get/readings/time_series_plot',
        #                         data=json.dumps(data), content_type = 'application/json')

        davAPI = DavAPI(self.conn)
        system_uid_list = ["5cc8402478ee11e59d5c000c29b92d09"]
        msr_id_list = ["8"]
        #response = self.app.get('dav/aqxapi/get/readings/tsplot/systems/' + str(system_uid_list) +  '/measurements/' + str(msr_id_list))

        actual_result = davAPI.get_readings_for_plot(system_uid_list,msr_id_list)
        #actual_result = json.loads(response.data)
        print actual_result
        expected_result = '{"response": [{"system_uid": "5cc8402478ee11e59d5c000c29b92d09", "name": "AQXQA", "measurement": [{"values": [{"y": 105.0, "x": 0, "date": "2016-03-18 18:50:00"}, {"y": 112.0, "x": 1, "date": "2016-03-18 19:45:00"}, {"y": 109.0, "x": 24, "date": "2016-03-19 18:45:00"}], "type": "o2"}]}]}'

        self.assertEquals(actual_result,expected_result)

    #2  data present for nitrate,O2,pH for "5cc8402478ee11e59d5c000c29b92d09"

    def test_get_readings_for_plot2(self):

        davAPI = DavAPI(self.conn)
        system_uid_list = ["5cc8402478ee11e59d5c000c29b92d09"]

        msr_id_list = ["6","8","9"]

        actual_result = davAPI.get_readings_for_plot(system_uid_list,msr_id_list)
        expected_result = '{"response": [{"system_uid": "5cc8402478ee11e59d5c000c29b92d09", "name": "AQXQA", "measurement": [{"values": [{"y": 0.0, "x": 0, "date": "2015-12-11 01:11:43"}, {"y": 1.0, "x": 2, "date": "2015-12-11 03:12:09"}, {"y": 0.0, "x": 27, "date": "2015-12-12 04:17:27"}, {"y": 2.54, "x": 97, "date": "2015-12-15 03:03:00"}, {"y": 0.0, "x": 160, "date": "2015-12-17 17:15:18"}, {"y": 0.0, "x": 193, "date": "2015-12-19 02:17:09"}, {"y": 20.0, "x": 529, "date": "2016-01-02 02:50:43"}, {"y": 40.0, "x": 675, "date": "2016-01-08 05:10:59"}, {"y": 26.27, "x": 695, "date": "2016-01-09 01:09:51"}, {"y": 20.0, "x": 913, "date": "2016-01-18 02:20:41"}], "type": "nitrate"}, {"values": [{"y": 105.0, "x": 0, "date": "2016-03-18 18:50:00"}, {"y": 112.0, "x": 1, "date": "2016-03-18 19:45:00"}, {"y": 109.0, "x": 24, "date": "2016-03-19 18:45:00"}], "type": "o2"}, {"values": [{"y": 6.2, "x": 0, "date": "2015-12-11 01:11:43"}, {"y": 7.35, "x": 2, "date": "2015-12-11 03:12:09"}, {"y": 7.03, "x": 27, "date": "2015-12-12 04:17:27"}, {"y": 7.33, "x": 97, "date": "2015-12-15 03:03:00"}, {"y": 6.2, "x": 160, "date": "2015-12-17 17:15:18"}, {"y": 6.2, "x": 193, "date": "2015-12-19 02:17:09"}, {"y": 6.4, "x": 529, "date": "2016-01-02 02:50:43"}, {"y": 6.2, "x": 675, "date": "2016-01-08 05:10:59"}, {"y": 8.4, "x": 695, "date": "2016-01-09 01:09:51"}, {"y": 8.4, "x": 913, "date": "2016-01-18 02:20:41"}], "type": "ph"}]}]}'
        print actual_result
        self.assertEquals(actual_result,expected_result)

    #3  data present for nitrate for "555d0cfe9ebc11e58153000c29b92d09","5cc8402478ee11e59d5c000c29b92d09","6b62eb76451211e5a1d4000c29b92d09"

    def test_get_readings_for_plot3(self):

        davAPI = DavAPI(self.conn)

        views = analyticsViews.get_conn()

        system_uid_list =  ["555d0cfe9ebc11e58153000c29b92d09","5cc8402478ee11e59d5c000c29b92d09","6b62eb76451211e5a1d4000c29b92d09"]
        msr_id_list = [6]

        actual_result =   analyticsViews.get_readings_for_tsplot(system_uid_list,msr_id_list)
        expected_result = '{"response": [{"system_uid": "555d0cfe9ebc11e58153000c29b92d09", "name": "P1 AQX", "measurement": [{"values": [{"y": 3.61, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 9.92, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 9.86, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 9.68, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 6.21, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 0.7, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 4.55, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 2.96, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 6.07, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 4.47, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 9.1, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 6.77, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 3.22, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 9.23, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 5.6, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 3.16, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 8.29, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 1.37, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 5.96, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 2.75, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 4.15, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 6.85, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 0.05, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 8.37, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 0.41, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 1.61, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 7.67, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 8.65, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 8.31, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 6.77, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 9.48, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 3.25, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 4.98, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 8.22, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 8.18, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 5.78, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 8.46, "x": 36, "date": "2015-01-02 12:00:00"}, {"y": 5.84, "x": 37, "date": "2015-01-02 13:00:00"}, {"y": 1.77, "x": 38, "date": "2015-01-02 14:00:00"}, {"y": 2.78, "x": 39, "date": "2015-01-02 15:00:00"}, {"y": 4.0, "x": 40, "date": "2015-01-02 16:00:00"}, {"y": 1.4, "x": 41, "date": "2015-01-02 17:00:00"}, {"y": 9.53, "x": 42, "date": "2015-01-02 18:00:00"}, {"y": 2.12, "x": 43, "date": "2015-01-02 19:00:00"}, {"y": 7.61, "x": 44, "date": "2015-01-02 20:00:00"}, {"y": 2.63, "x": 45, "date": "2015-01-02 21:00:00"}, {"y": 1.62, "x": 46, "date": "2015-01-02 22:00:00"}, {"y": 2.61, "x": 47, "date": "2015-01-02 23:00:00"}, {"y": 6.86, "x": 48, "date": "2015-01-03 00:00:00"}, {"y": 5.25, "x": 49, "date": "2015-01-03 01:00:00"}, {"y": 9.32, "x": 50, "date": "2015-01-03 02:00:00"}, {"y": 1.44, "x": 51, "date": "2015-01-03 03:00:00"}, {"y": 8.31, "x": 52, "date": "2015-01-03 04:00:00"}, {"y": 6.36, "x": 53, "date": "2015-01-03 05:00:00"}, {"y": 1.27, "x": 54, "date": "2015-01-03 06:00:00"}, {"y": 6.65, "x": 55, "date": "2015-01-03 07:00:00"}, {"y": 6.91, "x": 56, "date": "2015-01-03 08:00:00"}, {"y": 0.82, "x": 57, "date": "2015-01-03 09:00:00"}, {"y": 6.19, "x": 58, "date": "2015-01-03 10:00:00"}, {"y": 9.37, "x": 59, "date": "2015-01-03 11:00:00"}, {"y": 5.93, "x": 60, "date": "2015-01-03 12:00:00"}, {"y": 8.47, "x": 61, "date": "2015-01-03 13:00:00"}, {"y": 9.55, "x": 62, "date": "2015-01-03 14:00:00"}, {"y": 0.76, "x": 63, "date": "2015-01-03 15:00:00"}, {"y": 6.41, "x": 64, "date": "2015-01-03 16:00:00"}, {"y": 6.0, "x": 65, "date": "2015-01-03 17:00:00"}, {"y": 3.71, "x": 66, "date": "2015-01-03 18:00:00"}, {"y": 2.29, "x": 67, "date": "2015-01-03 19:00:00"}, {"y": 0.74, "x": 68, "date": "2015-01-03 20:00:00"}, {"y": 0.66, "x": 69, "date": "2015-01-03 21:00:00"}, {"y": 0.64, "x": 70, "date": "2015-01-03 22:00:00"}, {"y": 4.79, "x": 71, "date": "2015-01-03 23:00:00"}, {"y": 0.2, "x": 72, "date": "2015-01-04 00:00:00"}, {"y": 5.66, "x": 73, "date": "2015-01-04 01:00:00"}, {"y": 7.36, "x": 74, "date": "2015-01-04 02:00:00"}, {"y": 6.15, "x": 75, "date": "2015-01-04 03:00:00"}, {"y": 3.88, "x": 76, "date": "2015-01-04 04:00:00"}, {"y": 2.15, "x": 77, "date": "2015-01-04 05:00:00"}, {"y": 6.73, "x": 78, "date": "2015-01-04 06:00:00"}, {"y": 5.52, "x": 79, "date": "2015-01-04 07:00:00"}, {"y": 2.04, "x": 80, "date": "2015-01-04 08:00:00"}, {"y": 7.03, "x": 81, "date": "2015-01-04 09:00:00"}, {"y": 0.9, "x": 82, "date": "2015-01-04 10:00:00"}, {"y": 5.14, "x": 83, "date": "2015-01-04 11:00:00"}, {"y": 3.58, "x": 84, "date": "2015-01-04 12:00:00"}, {"y": 7.6, "x": 85, "date": "2015-01-04 13:00:00"}, {"y": 6.58, "x": 86, "date": "2015-01-04 14:00:00"}, {"y": 3.08, "x": 87, "date": "2015-01-04 15:00:00"}, {"y": 2.3, "x": 88, "date": "2015-01-04 16:00:00"}, {"y": 6.0, "x": 89, "date": "2015-01-04 17:00:00"}, {"y": 4.43, "x": 90, "date": "2015-01-04 18:00:00"}, {"y": 7.76, "x": 91, "date": "2015-01-04 19:00:00"}, {"y": 3.13, "x": 92, "date": "2015-01-04 20:00:00"}, {"y": 0.67, "x": 93, "date": "2015-01-04 21:00:00"}, {"y": 9.44, "x": 94, "date": "2015-01-04 22:00:00"}, {"y": 6.43, "x": 95, "date": "2015-01-04 23:00:00"}, {"y": 8.84, "x": 96, "date": "2015-01-05 00:00:00"}, {"y": 8.57, "x": 97, "date": "2015-01-05 01:00:00"}, {"y": 6.77, "x": 98, "date": "2015-01-05 02:00:00"}, {"y": 3.64, "x": 99, "date": "2015-01-05 03:00:00"}, {"y": 0.88, "x": 100, "date": "2015-01-05 04:00:00"}, {"y": 7.71, "x": 101, "date": "2015-01-05 05:00:00"}, {"y": 5.07, "x": 102, "date": "2015-01-05 06:00:00"}, {"y": 7.44, "x": 103, "date": "2015-01-05 07:00:00"}, {"y": 3.18, "x": 104, "date": "2015-01-05 08:00:00"}, {"y": 1.24, "x": 105, "date": "2015-01-05 09:00:00"}, {"y": 8.01, "x": 106, "date": "2015-01-05 10:00:00"}, {"y": 0.69, "x": 107, "date": "2015-01-05 11:00:00"}, {"y": 5.82, "x": 108, "date": "2015-01-05 12:00:00"}, {"y": 2.52, "x": 109, "date": "2015-01-05 13:00:00"}, {"y": 9.81, "x": 110, "date": "2015-01-05 14:00:00"}, {"y": 6.94, "x": 111, "date": "2015-01-05 15:00:00"}, {"y": 4.0, "x": 112, "date": "2015-01-05 16:00:00"}, {"y": 5.17, "x": 113, "date": "2015-01-05 17:00:00"}, {"y": 6.44, "x": 114, "date": "2015-01-05 18:00:00"}, {"y": 1.52, "x": 115, "date": "2015-01-05 19:00:00"}, {"y": 6.14, "x": 116, "date": "2015-01-05 20:00:00"}, {"y": 6.72, "x": 117, "date": "2015-01-05 21:00:00"}, {"y": 3.25, "x": 118, "date": "2015-01-05 22:00:00"}, {"y": 6.19, "x": 119, "date": "2015-01-05 23:00:00"}, {"y": 10.0, "x": 7604, "date": "2015-11-13 20:00:00"}, {"y": 15.0, "x": 7628, "date": "2015-11-14 20:00:00"}, {"y": 10.0, "x": 7652, "date": "2015-11-15 20:00:00"}, {"y": 10.0, "x": 7676, "date": "2015-11-16 20:00:00"}, {"y": 0.0, "x": 7700, "date": "2015-11-17 20:00:00"}, {"y": 2.0, "x": 7724, "date": "2015-11-18 20:00:00"}, {"y": 0.0, "x": 7748, "date": "2015-11-19 20:00:00"}, {"y": 0.0, "x": 7772, "date": "2015-11-20 20:00:00"}, {"y": 10.0, "x": 7796, "date": "2015-11-21 20:00:00"}, {"y": 0.0, "x": 7820, "date": "2015-11-22 20:00:00"}, {"y": 0.0, "x": 7844, "date": "2015-11-23 20:00:00"}, {"y": 10.0, "x": 7868, "date": "2015-11-24 20:00:00"}, {"y": 10.0, "x": 7892, "date": "2015-11-25 20:00:00"}, {"y": 20.0, "x": 7916, "date": "2015-11-26 20:00:00"}, {"y": 30.0, "x": 7940, "date": "2015-11-27 20:00:00"}, {"y": 20.0, "x": 7964, "date": "2015-11-28 20:00:00"}, {"y": 20.0, "x": 7988, "date": "2015-11-29 20:00:00"}, {"y": 40.0, "x": 8012, "date": "2015-11-30 20:00:00"}, {"y": 40.0, "x": 8036, "date": "2015-12-01 20:00:00"}, {"y": 50.0, "x": 8060, "date": "2015-12-02 20:00:00"}, {"y": 45.0, "x": 8084, "date": "2015-12-03 20:00:00"}, {"y": 42.5, "x": 8108, "date": "2015-12-04 20:00:00"}, {"y": 40.0, "x": 8132, "date": "2015-12-05 20:00:00"}, {"y": 45.0, "x": 8156, "date": "2015-12-06 20:00:00"}, {"y": 50.0, "x": 8180, "date": "2015-12-07 20:00:00"}, {"y": 50.0, "x": 8204, "date": "2015-12-08 20:00:00"}, {"y": 40.0, "x": 8228, "date": "2015-12-09 20:00:00"}, {"y": 50.0, "x": 8252, "date": "2015-12-10 20:00:00"}, {"y": 40.0, "x": 8276, "date": "2015-12-11 20:00:00"}, {"y": 50.0, "x": 8300, "date": "2015-12-12 20:00:00"}, {"y": 40.0, "x": 8324, "date": "2015-12-13 20:00:00"}, {"y": 40.0, "x": 8348, "date": "2015-12-14 20:00:00"}, {"y": 20.0, "x": 8372, "date": "2015-12-15 20:00:00"}, {"y": 40.0, "x": 8396, "date": "2015-12-16 20:00:00"}, {"y": 40.0, "x": 8420, "date": "2015-12-17 20:00:00"}, {"y": 40.0, "x": 8444, "date": "2015-12-18 20:00:00"}, {"y": 40.0, "x": 8468, "date": "2015-12-19 20:00:00"}, {"y": 50.0, "x": 8492, "date": "2015-12-20 20:00:00"}, {"y": 60.0, "x": 8516, "date": "2015-12-21 20:00:00"}, {"y": 50.0, "x": 8540, "date": "2015-12-22 20:00:00"}, {"y": 50.0, "x": 8564, "date": "2015-12-23 20:00:00"}, {"y": 50.0, "x": 8588, "date": "2015-12-24 20:00:00"}, {"y": 50.0, "x": 8612, "date": "2015-12-25 20:00:00"}, {"y": 50.0, "x": 8636, "date": "2015-12-26 20:00:00"}, {"y": 50.0, "x": 8660, "date": "2015-12-27 20:00:00"}, {"y": 60.0, "x": 8684, "date": "2015-12-28 20:00:00"}, {"y": 60.0, "x": 8708, "date": "2015-12-29 20:00:00"}, {"y": 60.0, "x": 8732, "date": "2015-12-30 20:00:00"}, {"y": 60.0, "x": 8756, "date": "2015-12-31 20:00:00"}, {"y": 60.0, "x": 8780, "date": "2016-01-01 20:00:00"}, {"y": 60.0, "x": 8804, "date": "2016-01-02 20:00:00"}, {"y": 61.0, "x": 8828, "date": "2016-01-03 20:00:00"}, {"y": 60.0, "x": 8852, "date": "2016-01-04 20:00:00"}, {"y": 60.0, "x": 8876, "date": "2016-01-05 20:00:00"}, {"y": 70.0, "x": 8900, "date": "2016-01-06 20:00:00"}, {"y": 70.0, "x": 8924, "date": "2016-01-07 20:00:00"}, {"y": 80.0, "x": 8948, "date": "2016-01-08 20:00:00"}, {"y": 100.0, "x": 8972, "date": "2016-01-09 20:00:00"}, {"y": 130.0, "x": 8996, "date": "2016-01-10 20:00:00"}, {"y": 60.0, "x": 9020, "date": "2016-01-11 20:00:00"}, {"y": 70.0, "x": 9044, "date": "2016-01-12 20:00:00"}, {"y": 70.0, "x": 9068, "date": "2016-01-13 20:00:00"}, {"y": 50.0, "x": 9092, "date": "2016-01-14 20:00:00"}], "type": "nitrate"}]}, {"system_uid": "5cc8402478ee11e59d5c000c29b92d09", "name": "AQXQA", "measurement": [{"values": [{"y": 0.0, "x": 0, "date": "2015-12-11 01:11:43"}, {"y": 1.0, "x": 2, "date": "2015-12-11 03:12:09"}, {"y": 0.0, "x": 27, "date": "2015-12-12 04:17:27"}, {"y": 2.54, "x": 97, "date": "2015-12-15 03:03:00"}, {"y": 0.0, "x": 160, "date": "2015-12-17 17:15:18"}, {"y": 0.0, "x": 193, "date": "2015-12-19 02:17:09"}, {"y": 20.0, "x": 529, "date": "2016-01-02 02:50:43"}, {"y": 40.0, "x": 675, "date": "2016-01-08 05:10:59"}, {"y": 26.27, "x": 695, "date": "2016-01-09 01:09:51"}, {"y": 20.0, "x": 913, "date": "2016-01-18 02:20:41"}], "type": "nitrate"}]}, {"system_uid": "6b62eb76451211e5a1d4000c29b92d09", "name": "ISB 2", "measurement": [{"values": [{"y": 0.6, "x": 0, "date": "2015-08-26 07:00:00"}, {"y": 0.5, "x": 24, "date": "2015-08-27 07:00:00"}, {"y": 0.0, "x": 48, "date": "2015-08-28 07:00:00"}, {"y": 0.7, "x": 72, "date": "2015-08-29 07:00:00"}, {"y": 1.3, "x": 168, "date": "2015-09-02 07:00:00"}, {"y": 0.9, "x": 216, "date": "2015-09-04 07:00:00"}, {"y": 0.7, "x": 384, "date": "2015-09-11 07:00:00"}, {"y": 0.0, "x": 466, "date": "2015-09-14 17:06:15"}], "type": "nitrate"}]}]}'
        print actual_result

        self.assertEquals(actual_result,expected_result)

    #4 data present for nitrate,O2,pH for "555d0cfe9ebc11e58153000c29b92d09","5cc8402478ee11e59d5c000c29b92d09","6b62eb76451211e5a1d4000c29b92d09"

    def test_get_readings_for_plot4(self):

        davAPI = DavAPI(self.conn)

        views = analyticsViews.get_conn()

        system_uid_list =  ["555d0cfe9ebc11e58153000c29b92d09","5cc8402478ee11e59d5c000c29b92d09","6b62eb76451211e5a1d4000c29b92d09"]
        msr_id_list = [6,8,9]

        actual_result =   analyticsViews.get_readings_for_tsplot(system_uid_list,msr_id_list)
        expected_result = '{"response": [{"system_uid": "555d0cfe9ebc11e58153000c29b92d09", "name": "P1 AQX", "measurement": [{"values": [{"y": 3.61, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 9.92, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 9.86, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 9.68, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 6.21, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 0.7, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 4.55, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 2.96, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 6.07, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 4.47, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 9.1, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 6.77, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 3.22, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 9.23, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 5.6, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 3.16, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 8.29, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 1.37, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 5.96, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 2.75, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 4.15, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 6.85, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 0.05, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 8.37, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 0.41, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 1.61, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 7.67, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 8.65, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 8.31, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 6.77, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 9.48, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 3.25, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 4.98, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 8.22, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 8.18, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 5.78, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 8.46, "x": 36, "date": "2015-01-02 12:00:00"}, {"y": 5.84, "x": 37, "date": "2015-01-02 13:00:00"}, {"y": 1.77, "x": 38, "date": "2015-01-02 14:00:00"}, {"y": 2.78, "x": 39, "date": "2015-01-02 15:00:00"}, {"y": 4.0, "x": 40, "date": "2015-01-02 16:00:00"}, {"y": 1.4, "x": 41, "date": "2015-01-02 17:00:00"}, {"y": 9.53, "x": 42, "date": "2015-01-02 18:00:00"}, {"y": 2.12, "x": 43, "date": "2015-01-02 19:00:00"}, {"y": 7.61, "x": 44, "date": "2015-01-02 20:00:00"}, {"y": 2.63, "x": 45, "date": "2015-01-02 21:00:00"}, {"y": 1.62, "x": 46, "date": "2015-01-02 22:00:00"}, {"y": 2.61, "x": 47, "date": "2015-01-02 23:00:00"}, {"y": 6.86, "x": 48, "date": "2015-01-03 00:00:00"}, {"y": 5.25, "x": 49, "date": "2015-01-03 01:00:00"}, {"y": 9.32, "x": 50, "date": "2015-01-03 02:00:00"}, {"y": 1.44, "x": 51, "date": "2015-01-03 03:00:00"}, {"y": 8.31, "x": 52, "date": "2015-01-03 04:00:00"}, {"y": 6.36, "x": 53, "date": "2015-01-03 05:00:00"}, {"y": 1.27, "x": 54, "date": "2015-01-03 06:00:00"}, {"y": 6.65, "x": 55, "date": "2015-01-03 07:00:00"}, {"y": 6.91, "x": 56, "date": "2015-01-03 08:00:00"}, {"y": 0.82, "x": 57, "date": "2015-01-03 09:00:00"}, {"y": 6.19, "x": 58, "date": "2015-01-03 10:00:00"}, {"y": 9.37, "x": 59, "date": "2015-01-03 11:00:00"}, {"y": 5.93, "x": 60, "date": "2015-01-03 12:00:00"}, {"y": 8.47, "x": 61, "date": "2015-01-03 13:00:00"}, {"y": 9.55, "x": 62, "date": "2015-01-03 14:00:00"}, {"y": 0.76, "x": 63, "date": "2015-01-03 15:00:00"}, {"y": 6.41, "x": 64, "date": "2015-01-03 16:00:00"}, {"y": 6.0, "x": 65, "date": "2015-01-03 17:00:00"}, {"y": 3.71, "x": 66, "date": "2015-01-03 18:00:00"}, {"y": 2.29, "x": 67, "date": "2015-01-03 19:00:00"}, {"y": 0.74, "x": 68, "date": "2015-01-03 20:00:00"}, {"y": 0.66, "x": 69, "date": "2015-01-03 21:00:00"}, {"y": 0.64, "x": 70, "date": "2015-01-03 22:00:00"}, {"y": 4.79, "x": 71, "date": "2015-01-03 23:00:00"}, {"y": 0.2, "x": 72, "date": "2015-01-04 00:00:00"}, {"y": 5.66, "x": 73, "date": "2015-01-04 01:00:00"}, {"y": 7.36, "x": 74, "date": "2015-01-04 02:00:00"}, {"y": 6.15, "x": 75, "date": "2015-01-04 03:00:00"}, {"y": 3.88, "x": 76, "date": "2015-01-04 04:00:00"}, {"y": 2.15, "x": 77, "date": "2015-01-04 05:00:00"}, {"y": 6.73, "x": 78, "date": "2015-01-04 06:00:00"}, {"y": 5.52, "x": 79, "date": "2015-01-04 07:00:00"}, {"y": 2.04, "x": 80, "date": "2015-01-04 08:00:00"}, {"y": 7.03, "x": 81, "date": "2015-01-04 09:00:00"}, {"y": 0.9, "x": 82, "date": "2015-01-04 10:00:00"}, {"y": 5.14, "x": 83, "date": "2015-01-04 11:00:00"}, {"y": 3.58, "x": 84, "date": "2015-01-04 12:00:00"}, {"y": 7.6, "x": 85, "date": "2015-01-04 13:00:00"}, {"y": 6.58, "x": 86, "date": "2015-01-04 14:00:00"}, {"y": 3.08, "x": 87, "date": "2015-01-04 15:00:00"}, {"y": 2.3, "x": 88, "date": "2015-01-04 16:00:00"}, {"y": 6.0, "x": 89, "date": "2015-01-04 17:00:00"}, {"y": 4.43, "x": 90, "date": "2015-01-04 18:00:00"}, {"y": 7.76, "x": 91, "date": "2015-01-04 19:00:00"}, {"y": 3.13, "x": 92, "date": "2015-01-04 20:00:00"}, {"y": 0.67, "x": 93, "date": "2015-01-04 21:00:00"}, {"y": 9.44, "x": 94, "date": "2015-01-04 22:00:00"}, {"y": 6.43, "x": 95, "date": "2015-01-04 23:00:00"}, {"y": 8.84, "x": 96, "date": "2015-01-05 00:00:00"}, {"y": 8.57, "x": 97, "date": "2015-01-05 01:00:00"}, {"y": 6.77, "x": 98, "date": "2015-01-05 02:00:00"}, {"y": 3.64, "x": 99, "date": "2015-01-05 03:00:00"}, {"y": 0.88, "x": 100, "date": "2015-01-05 04:00:00"}, {"y": 7.71, "x": 101, "date": "2015-01-05 05:00:00"}, {"y": 5.07, "x": 102, "date": "2015-01-05 06:00:00"}, {"y": 7.44, "x": 103, "date": "2015-01-05 07:00:00"}, {"y": 3.18, "x": 104, "date": "2015-01-05 08:00:00"}, {"y": 1.24, "x": 105, "date": "2015-01-05 09:00:00"}, {"y": 8.01, "x": 106, "date": "2015-01-05 10:00:00"}, {"y": 0.69, "x": 107, "date": "2015-01-05 11:00:00"}, {"y": 5.82, "x": 108, "date": "2015-01-05 12:00:00"}, {"y": 2.52, "x": 109, "date": "2015-01-05 13:00:00"}, {"y": 9.81, "x": 110, "date": "2015-01-05 14:00:00"}, {"y": 6.94, "x": 111, "date": "2015-01-05 15:00:00"}, {"y": 4.0, "x": 112, "date": "2015-01-05 16:00:00"}, {"y": 5.17, "x": 113, "date": "2015-01-05 17:00:00"}, {"y": 6.44, "x": 114, "date": "2015-01-05 18:00:00"}, {"y": 1.52, "x": 115, "date": "2015-01-05 19:00:00"}, {"y": 6.14, "x": 116, "date": "2015-01-05 20:00:00"}, {"y": 6.72, "x": 117, "date": "2015-01-05 21:00:00"}, {"y": 3.25, "x": 118, "date": "2015-01-05 22:00:00"}, {"y": 6.19, "x": 119, "date": "2015-01-05 23:00:00"}, {"y": 10.0, "x": 7604, "date": "2015-11-13 20:00:00"}, {"y": 15.0, "x": 7628, "date": "2015-11-14 20:00:00"}, {"y": 10.0, "x": 7652, "date": "2015-11-15 20:00:00"}, {"y": 10.0, "x": 7676, "date": "2015-11-16 20:00:00"}, {"y": 0.0, "x": 7700, "date": "2015-11-17 20:00:00"}, {"y": 2.0, "x": 7724, "date": "2015-11-18 20:00:00"}, {"y": 0.0, "x": 7748, "date": "2015-11-19 20:00:00"}, {"y": 0.0, "x": 7772, "date": "2015-11-20 20:00:00"}, {"y": 10.0, "x": 7796, "date": "2015-11-21 20:00:00"}, {"y": 0.0, "x": 7820, "date": "2015-11-22 20:00:00"}, {"y": 0.0, "x": 7844, "date": "2015-11-23 20:00:00"}, {"y": 10.0, "x": 7868, "date": "2015-11-24 20:00:00"}, {"y": 10.0, "x": 7892, "date": "2015-11-25 20:00:00"}, {"y": 20.0, "x": 7916, "date": "2015-11-26 20:00:00"}, {"y": 30.0, "x": 7940, "date": "2015-11-27 20:00:00"}, {"y": 20.0, "x": 7964, "date": "2015-11-28 20:00:00"}, {"y": 20.0, "x": 7988, "date": "2015-11-29 20:00:00"}, {"y": 40.0, "x": 8012, "date": "2015-11-30 20:00:00"}, {"y": 40.0, "x": 8036, "date": "2015-12-01 20:00:00"}, {"y": 50.0, "x": 8060, "date": "2015-12-02 20:00:00"}, {"y": 45.0, "x": 8084, "date": "2015-12-03 20:00:00"}, {"y": 42.5, "x": 8108, "date": "2015-12-04 20:00:00"}, {"y": 40.0, "x": 8132, "date": "2015-12-05 20:00:00"}, {"y": 45.0, "x": 8156, "date": "2015-12-06 20:00:00"}, {"y": 50.0, "x": 8180, "date": "2015-12-07 20:00:00"}, {"y": 50.0, "x": 8204, "date": "2015-12-08 20:00:00"}, {"y": 40.0, "x": 8228, "date": "2015-12-09 20:00:00"}, {"y": 50.0, "x": 8252, "date": "2015-12-10 20:00:00"}, {"y": 40.0, "x": 8276, "date": "2015-12-11 20:00:00"}, {"y": 50.0, "x": 8300, "date": "2015-12-12 20:00:00"}, {"y": 40.0, "x": 8324, "date": "2015-12-13 20:00:00"}, {"y": 40.0, "x": 8348, "date": "2015-12-14 20:00:00"}, {"y": 20.0, "x": 8372, "date": "2015-12-15 20:00:00"}, {"y": 40.0, "x": 8396, "date": "2015-12-16 20:00:00"}, {"y": 40.0, "x": 8420, "date": "2015-12-17 20:00:00"}, {"y": 40.0, "x": 8444, "date": "2015-12-18 20:00:00"}, {"y": 40.0, "x": 8468, "date": "2015-12-19 20:00:00"}, {"y": 50.0, "x": 8492, "date": "2015-12-20 20:00:00"}, {"y": 60.0, "x": 8516, "date": "2015-12-21 20:00:00"}, {"y": 50.0, "x": 8540, "date": "2015-12-22 20:00:00"}, {"y": 50.0, "x": 8564, "date": "2015-12-23 20:00:00"}, {"y": 50.0, "x": 8588, "date": "2015-12-24 20:00:00"}, {"y": 50.0, "x": 8612, "date": "2015-12-25 20:00:00"}, {"y": 50.0, "x": 8636, "date": "2015-12-26 20:00:00"}, {"y": 50.0, "x": 8660, "date": "2015-12-27 20:00:00"}, {"y": 60.0, "x": 8684, "date": "2015-12-28 20:00:00"}, {"y": 60.0, "x": 8708, "date": "2015-12-29 20:00:00"}, {"y": 60.0, "x": 8732, "date": "2015-12-30 20:00:00"}, {"y": 60.0, "x": 8756, "date": "2015-12-31 20:00:00"}, {"y": 60.0, "x": 8780, "date": "2016-01-01 20:00:00"}, {"y": 60.0, "x": 8804, "date": "2016-01-02 20:00:00"}, {"y": 61.0, "x": 8828, "date": "2016-01-03 20:00:00"}, {"y": 60.0, "x": 8852, "date": "2016-01-04 20:00:00"}, {"y": 60.0, "x": 8876, "date": "2016-01-05 20:00:00"}, {"y": 70.0, "x": 8900, "date": "2016-01-06 20:00:00"}, {"y": 70.0, "x": 8924, "date": "2016-01-07 20:00:00"}, {"y": 80.0, "x": 8948, "date": "2016-01-08 20:00:00"}, {"y": 100.0, "x": 8972, "date": "2016-01-09 20:00:00"}, {"y": 130.0, "x": 8996, "date": "2016-01-10 20:00:00"}, {"y": 60.0, "x": 9020, "date": "2016-01-11 20:00:00"}, {"y": 70.0, "x": 9044, "date": "2016-01-12 20:00:00"}, {"y": 70.0, "x": 9068, "date": "2016-01-13 20:00:00"}, {"y": 50.0, "x": 9092, "date": "2016-01-14 20:00:00"}], "type": "nitrate"}, {"values": [{"y": 7.52, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 0.89, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 1.31, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 1.55, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 6.28, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 3.93, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 3.17, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 6.9, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 9.39, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 1.9, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 5.73, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 9.52, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 9.66, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 5.09, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 9.0, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 9.78, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 7.16, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 9.26, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 4.89, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 8.73, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 2.59, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 7.82, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 1.09, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 6.03, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 1.06, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 0.08, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 9.05, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 2.02, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 1.88, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 6.04, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 8.8, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 5.88, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 6.37, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 3.27, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 9.85, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 2.36, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 1.39, "x": 36, "date": "2015-01-02 12:00:00"}, {"y": 0.77, "x": 37, "date": "2015-01-02 13:00:00"}, {"y": 2.11, "x": 38, "date": "2015-01-02 14:00:00"}, {"y": 0.89, "x": 39, "date": "2015-01-02 15:00:00"}, {"y": 8.84, "x": 40, "date": "2015-01-02 16:00:00"}, {"y": 8.88, "x": 41, "date": "2015-01-02 17:00:00"}, {"y": 6.15, "x": 42, "date": "2015-01-02 18:00:00"}, {"y": 2.23, "x": 43, "date": "2015-01-02 19:00:00"}, {"y": 1.58, "x": 44, "date": "2015-01-02 20:00:00"}, {"y": 0.81, "x": 45, "date": "2015-01-02 21:00:00"}, {"y": 1.88, "x": 46, "date": "2015-01-02 22:00:00"}, {"y": 7.49, "x": 47, "date": "2015-01-02 23:00:00"}, {"y": 6.62, "x": 48, "date": "2015-01-03 00:00:00"}, {"y": 9.16, "x": 49, "date": "2015-01-03 01:00:00"}, {"y": 0.69, "x": 50, "date": "2015-01-03 02:00:00"}, {"y": 9.25, "x": 51, "date": "2015-01-03 03:00:00"}, {"y": 4.31, "x": 52, "date": "2015-01-03 04:00:00"}, {"y": 8.31, "x": 53, "date": "2015-01-03 05:00:00"}, {"y": 4.64, "x": 54, "date": "2015-01-03 06:00:00"}, {"y": 3.95, "x": 55, "date": "2015-01-03 07:00:00"}, {"y": 1.37, "x": 56, "date": "2015-01-03 08:00:00"}, {"y": 5.95, "x": 57, "date": "2015-01-03 09:00:00"}, {"y": 3.12, "x": 58, "date": "2015-01-03 10:00:00"}, {"y": 6.34, "x": 59, "date": "2015-01-03 11:00:00"}, {"y": 8.31, "x": 60, "date": "2015-01-03 12:00:00"}, {"y": 6.31, "x": 61, "date": "2015-01-03 13:00:00"}, {"y": 9.68, "x": 62, "date": "2015-01-03 14:00:00"}, {"y": 5.62, "x": 63, "date": "2015-01-03 15:00:00"}, {"y": 3.0, "x": 64, "date": "2015-01-03 16:00:00"}, {"y": 9.39, "x": 65, "date": "2015-01-03 17:00:00"}, {"y": 6.67, "x": 66, "date": "2015-01-03 18:00:00"}, {"y": 4.07, "x": 67, "date": "2015-01-03 19:00:00"}, {"y": 8.11, "x": 68, "date": "2015-01-03 20:00:00"}, {"y": 9.88, "x": 69, "date": "2015-01-03 21:00:00"}, {"y": 6.93, "x": 70, "date": "2015-01-03 22:00:00"}, {"y": 1.73, "x": 71, "date": "2015-01-03 23:00:00"}, {"y": 6.84, "x": 72, "date": "2015-01-04 00:00:00"}, {"y": 7.6, "x": 73, "date": "2015-01-04 01:00:00"}, {"y": 4.55, "x": 74, "date": "2015-01-04 02:00:00"}, {"y": 2.92, "x": 75, "date": "2015-01-04 03:00:00"}, {"y": 3.23, "x": 76, "date": "2015-01-04 04:00:00"}, {"y": 1.73, "x": 77, "date": "2015-01-04 05:00:00"}, {"y": 3.88, "x": 78, "date": "2015-01-04 06:00:00"}, {"y": 6.63, "x": 79, "date": "2015-01-04 07:00:00"}, {"y": 1.19, "x": 80, "date": "2015-01-04 08:00:00"}, {"y": 1.2, "x": 81, "date": "2015-01-04 09:00:00"}, {"y": 4.2, "x": 82, "date": "2015-01-04 10:00:00"}, {"y": 4.53, "x": 83, "date": "2015-01-04 11:00:00"}, {"y": 8.72, "x": 84, "date": "2015-01-04 12:00:00"}, {"y": 0.91, "x": 85, "date": "2015-01-04 13:00:00"}, {"y": 2.04, "x": 86, "date": "2015-01-04 14:00:00"}, {"y": 8.0, "x": 87, "date": "2015-01-04 15:00:00"}, {"y": 2.48, "x": 88, "date": "2015-01-04 16:00:00"}, {"y": 8.84, "x": 89, "date": "2015-01-04 17:00:00"}, {"y": 7.1, "x": 90, "date": "2015-01-04 18:00:00"}, {"y": 9.49, "x": 91, "date": "2015-01-04 19:00:00"}, {"y": 1.35, "x": 92, "date": "2015-01-04 20:00:00"}, {"y": 1.77, "x": 93, "date": "2015-01-04 21:00:00"}, {"y": 1.12, "x": 94, "date": "2015-01-04 22:00:00"}, {"y": 3.51, "x": 95, "date": "2015-01-04 23:00:00"}, {"y": 8.29, "x": 96, "date": "2015-01-05 00:00:00"}, {"y": 1.64, "x": 97, "date": "2015-01-05 01:00:00"}, {"y": 4.75, "x": 98, "date": "2015-01-05 02:00:00"}, {"y": 3.84, "x": 99, "date": "2015-01-05 03:00:00"}, {"y": 4.71, "x": 100, "date": "2015-01-05 04:00:00"}, {"y": 1.96, "x": 101, "date": "2015-01-05 05:00:00"}, {"y": 5.41, "x": 102, "date": "2015-01-05 06:00:00"}, {"y": 3.51, "x": 103, "date": "2015-01-05 07:00:00"}, {"y": 0.04, "x": 104, "date": "2015-01-05 08:00:00"}, {"y": 9.47, "x": 105, "date": "2015-01-05 09:00:00"}, {"y": 5.73, "x": 106, "date": "2015-01-05 10:00:00"}, {"y": 8.2, "x": 107, "date": "2015-01-05 11:00:00"}, {"y": 1.87, "x": 108, "date": "2015-01-05 12:00:00"}, {"y": 6.72, "x": 109, "date": "2015-01-05 13:00:00"}, {"y": 2.11, "x": 110, "date": "2015-01-05 14:00:00"}, {"y": 6.23, "x": 111, "date": "2015-01-05 15:00:00"}, {"y": 8.87, "x": 112, "date": "2015-01-05 16:00:00"}, {"y": 2.68, "x": 113, "date": "2015-01-05 17:00:00"}, {"y": 8.73, "x": 114, "date": "2015-01-05 18:00:00"}, {"y": 9.63, "x": 115, "date": "2015-01-05 19:00:00"}, {"y": 4.24, "x": 116, "date": "2015-01-05 20:00:00"}, {"y": 5.26, "x": 117, "date": "2015-01-05 21:00:00"}, {"y": 8.94, "x": 118, "date": "2015-01-05 22:00:00"}, {"y": 0.52, "x": 119, "date": "2015-01-05 23:00:00"}, {"y": 100.0, "x": 10578, "date": "2016-03-16 18:00:00"}, {"y": 100.0, "x": 10602, "date": "2016-03-17 18:00:00"}, {"y": 133.33, "x": 10626, "date": "2016-03-18 18:45:00"}], "type": "o2"}, {"values": [{"y": 0.06, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 7.04, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 6.25, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 3.91, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 0.65, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 0.92, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 7.09, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 8.1, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 6.53, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 4.68, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 1.24, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 8.25, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 6.81, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 4.14, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 2.45, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 6.97, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 4.21, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 3.08, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 5.99, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 5.38, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 3.19, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 9.49, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 5.22, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 6.12, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 9.14, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 4.63, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 5.5, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 7.31, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 0.2, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 7.58, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 2.11, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 3.9, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 7.77, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 7.39, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 3.37, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 5.62, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 7.01, "x": 36, "date": "2015-01-02 12:00:00"}, {"y": 8.44, "x": 37, "date": "2015-01-02 13:00:00"}, {"y": 7.45, "x": 38, "date": "2015-01-02 14:00:00"}, {"y": 0.53, "x": 39, "date": "2015-01-02 15:00:00"}, {"y": 9.68, "x": 40, "date": "2015-01-02 16:00:00"}, {"y": 4.22, "x": 41, "date": "2015-01-02 17:00:00"}, {"y": 5.94, "x": 42, "date": "2015-01-02 18:00:00"}, {"y": 6.65, "x": 43, "date": "2015-01-02 19:00:00"}, {"y": 9.43, "x": 44, "date": "2015-01-02 20:00:00"}, {"y": 5.41, "x": 45, "date": "2015-01-02 21:00:00"}, {"y": 3.26, "x": 46, "date": "2015-01-02 22:00:00"}, {"y": 8.3, "x": 47, "date": "2015-01-02 23:00:00"}, {"y": 8.25, "x": 48, "date": "2015-01-03 00:00:00"}, {"y": 6.97, "x": 49, "date": "2015-01-03 01:00:00"}, {"y": 8.9, "x": 50, "date": "2015-01-03 02:00:00"}, {"y": 3.81, "x": 51, "date": "2015-01-03 03:00:00"}, {"y": 3.54, "x": 52, "date": "2015-01-03 04:00:00"}, {"y": 4.71, "x": 53, "date": "2015-01-03 05:00:00"}, {"y": 3.3, "x": 54, "date": "2015-01-03 06:00:00"}, {"y": 1.36, "x": 55, "date": "2015-01-03 07:00:00"}, {"y": 1.8, "x": 56, "date": "2015-01-03 08:00:00"}, {"y": 9.66, "x": 57, "date": "2015-01-03 09:00:00"}, {"y": 5.89, "x": 58, "date": "2015-01-03 10:00:00"}, {"y": 5.47, "x": 59, "date": "2015-01-03 11:00:00"}, {"y": 5.95, "x": 60, "date": "2015-01-03 12:00:00"}, {"y": 1.73, "x": 61, "date": "2015-01-03 13:00:00"}, {"y": 1.26, "x": 62, "date": "2015-01-03 14:00:00"}, {"y": 1.27, "x": 63, "date": "2015-01-03 15:00:00"}, {"y": 4.58, "x": 64, "date": "2015-01-03 16:00:00"}, {"y": 4.92, "x": 65, "date": "2015-01-03 17:00:00"}, {"y": 5.35, "x": 66, "date": "2015-01-03 18:00:00"}, {"y": 8.57, "x": 67, "date": "2015-01-03 19:00:00"}, {"y": 2.76, "x": 68, "date": "2015-01-03 20:00:00"}, {"y": 0.15, "x": 69, "date": "2015-01-03 21:00:00"}, {"y": 9.66, "x": 70, "date": "2015-01-03 22:00:00"}, {"y": 0.95, "x": 71, "date": "2015-01-03 23:00:00"}, {"y": 4.44, "x": 72, "date": "2015-01-04 00:00:00"}, {"y": 3.43, "x": 73, "date": "2015-01-04 01:00:00"}, {"y": 7.22, "x": 74, "date": "2015-01-04 02:00:00"}, {"y": 5.78, "x": 75, "date": "2015-01-04 03:00:00"}, {"y": 0.15, "x": 76, "date": "2015-01-04 04:00:00"}, {"y": 9.9, "x": 77, "date": "2015-01-04 05:00:00"}, {"y": 9.12, "x": 78, "date": "2015-01-04 06:00:00"}, {"y": 1.51, "x": 79, "date": "2015-01-04 07:00:00"}, {"y": 8.29, "x": 80, "date": "2015-01-04 08:00:00"}, {"y": 4.46, "x": 81, "date": "2015-01-04 09:00:00"}, {"y": 0.22, "x": 82, "date": "2015-01-04 10:00:00"}, {"y": 5.44, "x": 83, "date": "2015-01-04 11:00:00"}, {"y": 5.59, "x": 84, "date": "2015-01-04 12:00:00"}, {"y": 9.74, "x": 85, "date": "2015-01-04 13:00:00"}, {"y": 8.39, "x": 86, "date": "2015-01-04 14:00:00"}, {"y": 1.06, "x": 87, "date": "2015-01-04 15:00:00"}, {"y": 4.34, "x": 88, "date": "2015-01-04 16:00:00"}, {"y": 1.03, "x": 89, "date": "2015-01-04 17:00:00"}, {"y": 4.37, "x": 90, "date": "2015-01-04 18:00:00"}, {"y": 7.72, "x": 91, "date": "2015-01-04 19:00:00"}, {"y": 2.67, "x": 92, "date": "2015-01-04 20:00:00"}, {"y": 4.48, "x": 93, "date": "2015-01-04 21:00:00"}, {"y": 2.44, "x": 94, "date": "2015-01-04 22:00:00"}, {"y": 1.16, "x": 95, "date": "2015-01-04 23:00:00"}, {"y": 4.75, "x": 96, "date": "2015-01-05 00:00:00"}, {"y": 0.52, "x": 97, "date": "2015-01-05 01:00:00"}, {"y": 6.76, "x": 98, "date": "2015-01-05 02:00:00"}, {"y": 4.34, "x": 99, "date": "2015-01-05 03:00:00"}, {"y": 7.89, "x": 100, "date": "2015-01-05 04:00:00"}, {"y": 5.97, "x": 101, "date": "2015-01-05 05:00:00"}, {"y": 5.65, "x": 102, "date": "2015-01-05 06:00:00"}, {"y": 3.75, "x": 103, "date": "2015-01-05 07:00:00"}, {"y": 4.4, "x": 104, "date": "2015-01-05 08:00:00"}, {"y": 3.18, "x": 105, "date": "2015-01-05 09:00:00"}, {"y": 9.87, "x": 106, "date": "2015-01-05 10:00:00"}, {"y": 9.07, "x": 107, "date": "2015-01-05 11:00:00"}, {"y": 7.27, "x": 108, "date": "2015-01-05 12:00:00"}, {"y": 9.52, "x": 109, "date": "2015-01-05 13:00:00"}, {"y": 4.34, "x": 110, "date": "2015-01-05 14:00:00"}, {"y": 3.15, "x": 111, "date": "2015-01-05 15:00:00"}, {"y": 9.83, "x": 112, "date": "2015-01-05 16:00:00"}, {"y": 0.56, "x": 113, "date": "2015-01-05 17:00:00"}, {"y": 3.53, "x": 114, "date": "2015-01-05 18:00:00"}, {"y": 2.64, "x": 115, "date": "2015-01-05 19:00:00"}, {"y": 9.08, "x": 116, "date": "2015-01-05 20:00:00"}, {"y": 8.41, "x": 117, "date": "2015-01-05 21:00:00"}, {"y": 2.11, "x": 118, "date": "2015-01-05 22:00:00"}, {"y": 7.82, "x": 119, "date": "2015-01-05 23:00:00"}, {"y": 6.6, "x": 7604, "date": "2015-11-13 20:00:00"}, {"y": 6.7, "x": 7628, "date": "2015-11-14 20:00:00"}, {"y": 7.2, "x": 7652, "date": "2015-11-15 20:00:00"}, {"y": 7.0, "x": 7676, "date": "2015-11-16 20:00:00"}, {"y": 6.7, "x": 7700, "date": "2015-11-17 20:00:00"}, {"y": 6.9, "x": 7724, "date": "2015-11-18 20:00:00"}, {"y": 6.9, "x": 7748, "date": "2015-11-19 20:00:00"}, {"y": 6.8, "x": 7772, "date": "2015-11-20 20:00:00"}, {"y": 7.0, "x": 7796, "date": "2015-11-21 20:00:00"}, {"y": 7.0, "x": 7820, "date": "2015-11-22 20:00:00"}, {"y": 7.0, "x": 7844, "date": "2015-11-23 20:00:00"}, {"y": 7.2, "x": 7868, "date": "2015-11-24 20:00:00"}, {"y": 6.9, "x": 7892, "date": "2015-11-25 20:00:00"}, {"y": 7.0, "x": 7916, "date": "2015-11-26 20:00:00"}, {"y": 7.1, "x": 7940, "date": "2015-11-27 20:00:00"}, {"y": 6.8, "x": 7964, "date": "2015-11-28 20:00:00"}, {"y": 6.8, "x": 7988, "date": "2015-11-29 20:00:00"}, {"y": 6.5, "x": 8012, "date": "2015-11-30 20:00:00"}, {"y": 6.5, "x": 8036, "date": "2015-12-01 20:00:00"}, {"y": 6.5, "x": 8060, "date": "2015-12-02 20:00:00"}, {"y": 6.2, "x": 8084, "date": "2015-12-03 20:00:00"}, {"y": 6.6, "x": 8108, "date": "2015-12-04 20:00:00"}, {"y": 6.2, "x": 8132, "date": "2015-12-05 20:00:00"}, {"y": 6.1, "x": 8156, "date": "2015-12-06 20:00:00"}, {"y": 6.4, "x": 8180, "date": "2015-12-07 20:00:00"}, {"y": 6.3, "x": 8204, "date": "2015-12-08 20:00:00"}, {"y": 6.3, "x": 8228, "date": "2015-12-09 20:00:00"}, {"y": 6.3, "x": 8252, "date": "2015-12-10 20:00:00"}, {"y": 6.3, "x": 8276, "date": "2015-12-11 20:00:00"}, {"y": 6.4, "x": 8300, "date": "2015-12-12 20:00:00"}, {"y": 6.5, "x": 8324, "date": "2015-12-13 20:00:00"}, {"y": 6.5, "x": 8348, "date": "2015-12-14 20:00:00"}, {"y": 7.2, "x": 8372, "date": "2015-12-15 20:00:00"}, {"y": 7.1, "x": 8396, "date": "2015-12-16 20:00:00"}, {"y": 6.8, "x": 8420, "date": "2015-12-17 20:00:00"}, {"y": 6.8, "x": 8444, "date": "2015-12-18 20:00:00"}, {"y": 6.5, "x": 8468, "date": "2015-12-19 20:00:00"}, {"y": 6.7, "x": 8492, "date": "2015-12-20 20:00:00"}, {"y": 6.6, "x": 8516, "date": "2015-12-21 20:00:00"}, {"y": 6.7, "x": 8540, "date": "2015-12-22 20:00:00"}, {"y": 6.7, "x": 8564, "date": "2015-12-23 20:00:00"}, {"y": 6.8, "x": 8588, "date": "2015-12-24 20:00:00"}, {"y": 7.0, "x": 8612, "date": "2015-12-25 20:00:00"}, {"y": 7.13, "x": 8636, "date": "2015-12-26 20:00:00"}, {"y": 6.4, "x": 8660, "date": "2015-12-27 20:00:00"}, {"y": 6.2, "x": 8684, "date": "2015-12-28 20:00:00"}, {"y": 6.2, "x": 8708, "date": "2015-12-29 20:00:00"}, {"y": 6.5, "x": 8732, "date": "2015-12-30 20:00:00"}, {"y": 6.5, "x": 8756, "date": "2015-12-31 20:00:00"}, {"y": 6.5, "x": 8780, "date": "2016-01-01 20:00:00"}, {"y": 6.5, "x": 8804, "date": "2016-01-02 20:00:00"}, {"y": 6.5, "x": 8828, "date": "2016-01-03 20:00:00"}, {"y": 6.8, "x": 8852, "date": "2016-01-04 20:00:00"}, {"y": 7.0, "x": 8876, "date": "2016-01-05 20:00:00"}, {"y": 7.2, "x": 8900, "date": "2016-01-06 20:00:00"}, {"y": 7.31, "x": 8924, "date": "2016-01-07 20:00:00"}, {"y": 7.56, "x": 8948, "date": "2016-01-08 20:00:00"}, {"y": 7.4, "x": 8972, "date": "2016-01-09 20:00:00"}, {"y": 7.2, "x": 8996, "date": "2016-01-10 20:00:00"}, {"y": 7.6, "x": 9020, "date": "2016-01-11 20:00:00"}, {"y": 7.6, "x": 9044, "date": "2016-01-12 20:00:00"}, {"y": 7.6, "x": 9068, "date": "2016-01-13 20:00:00"}, {"y": 7.6, "x": 9092, "date": "2016-01-14 20:00:00"}], "type": "ph"}]}, {"system_uid": "5cc8402478ee11e59d5c000c29b92d09", "name": "AQXQA", "measurement": [{"values": [{"y": 0.0, "x": 0, "date": "2015-12-11 01:11:43"}, {"y": 1.0, "x": 2, "date": "2015-12-11 03:12:09"}, {"y": 0.0, "x": 27, "date": "2015-12-12 04:17:27"}, {"y": 2.54, "x": 97, "date": "2015-12-15 03:03:00"}, {"y": 0.0, "x": 160, "date": "2015-12-17 17:15:18"}, {"y": 0.0, "x": 193, "date": "2015-12-19 02:17:09"}, {"y": 20.0, "x": 529, "date": "2016-01-02 02:50:43"}, {"y": 40.0, "x": 675, "date": "2016-01-08 05:10:59"}, {"y": 26.27, "x": 695, "date": "2016-01-09 01:09:51"}, {"y": 20.0, "x": 913, "date": "2016-01-18 02:20:41"}], "type": "nitrate"}, {"values": [{"y": 105.0, "x": 0, "date": "2016-03-18 18:50:00"}, {"y": 112.0, "x": 1, "date": "2016-03-18 19:45:00"}, {"y": 109.0, "x": 24, "date": "2016-03-19 18:45:00"}], "type": "o2"}, {"values": [{"y": 6.2, "x": 0, "date": "2015-12-11 01:11:43"}, {"y": 7.35, "x": 2, "date": "2015-12-11 03:12:09"}, {"y": 7.03, "x": 27, "date": "2015-12-12 04:17:27"}, {"y": 7.33, "x": 97, "date": "2015-12-15 03:03:00"}, {"y": 6.2, "x": 160, "date": "2015-12-17 17:15:18"}, {"y": 6.2, "x": 193, "date": "2015-12-19 02:17:09"}, {"y": 6.4, "x": 529, "date": "2016-01-02 02:50:43"}, {"y": 6.2, "x": 675, "date": "2016-01-08 05:10:59"}, {"y": 8.4, "x": 695, "date": "2016-01-09 01:09:51"}, {"y": 8.4, "x": 913, "date": "2016-01-18 02:20:41"}], "type": "ph"}]}, {"system_uid": "6b62eb76451211e5a1d4000c29b92d09", "name": "ISB 2", "measurement": [{"values": [{"y": 0.6, "x": 0, "date": "2015-08-26 07:00:00"}, {"y": 0.5, "x": 24, "date": "2015-08-27 07:00:00"}, {"y": 0.0, "x": 48, "date": "2015-08-28 07:00:00"}, {"y": 0.7, "x": 72, "date": "2015-08-29 07:00:00"}, {"y": 1.3, "x": 168, "date": "2015-09-02 07:00:00"}, {"y": 0.9, "x": 216, "date": "2015-09-04 07:00:00"}, {"y": 0.7, "x": 384, "date": "2015-09-11 07:00:00"}, {"y": 0.0, "x": 466, "date": "2015-09-14 17:06:15"}], "type": "nitrate"}, {"values": [{"y": 6.4, "x": 0, "date": "2015-08-27 07:00:00"}, {"y": 6.2, "x": 48, "date": "2015-08-29 07:00:00"}, {"y": 5.3, "x": 144, "date": "2015-09-02 07:00:00"}, {"y": 6.7, "x": 168, "date": "2015-09-03 07:00:00"}, {"y": 6.8, "x": 192, "date": "2015-09-04 07:00:00"}, {"y": 5.1, "x": 360, "date": "2015-09-11 07:00:00"}, {"y": -0.06, "x": 442, "date": "2015-09-14 17:06:15"}], "type": "o2"}, {"values": [{"y": 7.86, "x": 0, "date": "2015-08-26 07:00:00"}, {"y": 8.4, "x": 48, "date": "2015-08-28 07:00:00"}, {"y": 7.73, "x": 72, "date": "2015-08-29 07:00:00"}, {"y": 7.22, "x": 168, "date": "2015-09-02 07:00:00"}, {"y": 7.41, "x": 216, "date": "2015-09-04 07:00:00"}, {"y": 7.27, "x": 384, "date": "2015-09-11 07:00:00"}, {"y": 5.47, "x": 466, "date": "2015-09-14 17:06:15"}], "type": "ph"}]}]}'
        print actual_result

        self.assertEquals(actual_result,expected_result)

    # Tests 2 systems with 2 measurement ids.
    # SYSTEM1: b9752004864911e58f3f000c29b92d09
    # SYSTEM2: 3ddb948a5afe11e5a2ac000c29b92d09
    # MEASUREMENT1: alkalinity (SYSTEM1)
    # MEASUREMENT2: chlorine (SYSTEM1)
    # MEASUREMENT3: hardness(SYSTEM1)
    def test_get_readings_for_plot5(self):
        davAPI = DavAPI(self.conn)
        views = analyticsViews.get_conn()
        system_uid_list = ["b9752004864911e58f3f000c29b92d09","3ddb948a5afe11e5a2ac000c29b92d09"]
        msr_id_list = ["1", "3", "4"]
        expected_result = '{"response": [{"system_uid": "b9752004864911e58f3f000c29b92d09", "name": "This is Odd an Urban Farm ", "measurement": [{"values": [{"y": 2.92, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 2.21, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 5.11, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 4.0, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 6.83, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 1.3, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 0.2, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 2.49, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 3.45, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 9.97, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 8.58, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 0.83, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 5.71, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 6.72, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 7.31, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 9.58, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 3.99, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 3.75, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 4.27, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 9.45, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 9.47, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 5.21, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 7.24, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 7.74, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 8.09, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 7.39, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 2.89, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 3.78, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 0.59, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 2.49, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 8.55, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 9.25, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 6.09, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 9.94, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 5.43, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 5.29, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 1.79, "x": 36, "date": "2015-01-02 12:00:00"}], "type": "alkalinity"}, {"values": [{"y": 5.77, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 1.84, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 9.86, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 8.14, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 4.31, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 1.53, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 6.59, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 4.5, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 4.77, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 4.43, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 1.14, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 8.91, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 1.16, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 7.41, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 4.01, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 6.53, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 8.96, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 4.86, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 8.51, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 4.44, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 0.16, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 3.65, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 3.24, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 2.08, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 7.64, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 7.44, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 2.03, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 2.68, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 6.47, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 6.1, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 4.18, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 6.18, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 6.81, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 8.14, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 8.6, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 9.7, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 4.94, "x": 36, "date": "2015-01-02 12:00:00"}], "type": "chlorine"}, {"values": [{"y": 2.8, "x": 0, "date": "2015-01-01 00:00:00"}, {"y": 9.49, "x": 1, "date": "2015-01-01 01:00:00"}, {"y": 8.74, "x": 2, "date": "2015-01-01 02:00:00"}, {"y": 8.24, "x": 3, "date": "2015-01-01 03:00:00"}, {"y": 2.8, "x": 4, "date": "2015-01-01 04:00:00"}, {"y": 7.2, "x": 5, "date": "2015-01-01 05:00:00"}, {"y": 0.16, "x": 6, "date": "2015-01-01 06:00:00"}, {"y": 6.55, "x": 7, "date": "2015-01-01 07:00:00"}, {"y": 7.58, "x": 8, "date": "2015-01-01 08:00:00"}, {"y": 3.57, "x": 9, "date": "2015-01-01 09:00:00"}, {"y": 6.83, "x": 10, "date": "2015-01-01 10:00:00"}, {"y": 9.81, "x": 11, "date": "2015-01-01 11:00:00"}, {"y": 1.05, "x": 12, "date": "2015-01-01 12:00:00"}, {"y": 8.46, "x": 13, "date": "2015-01-01 13:00:00"}, {"y": 6.52, "x": 14, "date": "2015-01-01 14:00:00"}, {"y": 7.25, "x": 15, "date": "2015-01-01 15:00:00"}, {"y": 7.98, "x": 16, "date": "2015-01-01 16:00:00"}, {"y": 2.83, "x": 17, "date": "2015-01-01 17:00:00"}, {"y": 0.28, "x": 18, "date": "2015-01-01 18:00:00"}, {"y": 7.88, "x": 19, "date": "2015-01-01 19:00:00"}, {"y": 5.9, "x": 20, "date": "2015-01-01 20:00:00"}, {"y": 7.19, "x": 21, "date": "2015-01-01 21:00:00"}, {"y": 0.61, "x": 22, "date": "2015-01-01 22:00:00"}, {"y": 7.52, "x": 23, "date": "2015-01-01 23:00:00"}, {"y": 4.74, "x": 24, "date": "2015-01-02 00:00:00"}, {"y": 9.44, "x": 25, "date": "2015-01-02 01:00:00"}, {"y": 0.31, "x": 26, "date": "2015-01-02 02:00:00"}, {"y": 2.91, "x": 27, "date": "2015-01-02 03:00:00"}, {"y": 2.65, "x": 28, "date": "2015-01-02 04:00:00"}, {"y": 1.37, "x": 29, "date": "2015-01-02 05:00:00"}, {"y": 0.15, "x": 30, "date": "2015-01-02 06:00:00"}, {"y": 2.48, "x": 31, "date": "2015-01-02 07:00:00"}, {"y": 3.16, "x": 32, "date": "2015-01-02 08:00:00"}, {"y": 0.56, "x": 33, "date": "2015-01-02 09:00:00"}, {"y": 0.84, "x": 34, "date": "2015-01-02 10:00:00"}, {"y": 8.99, "x": 35, "date": "2015-01-02 11:00:00"}, {"y": 0.91, "x": 36, "date": "2015-01-02 12:00:00"}], "type": "hardness"}]}, {"system_uid": "3ddb948a5afe11e5a2ac000c29b92d09", "name": "ISB 5", "measurement": [{"values": [], "type": "alkalinity"}, {"values": [], "type": "chlorine"}, {"values": [], "type": "hardness"}]}]}'
        actual_result = analyticsViews.get_readings_for_tsplot(system_uid_list,msr_id_list)
        self.assertEquals(expected_result, actual_result)

    # Tests 2 systems with 4 measurement ids.
    # SYSTEM1: 3ddb948a5afe11e5a2ac000c29b92d09
    # SYSTEM2: b9cf213a8efa11e587db000c29b92d09
    # MEASUREMENT1: alkalinity (SYSTEM2)
    # MEASUREMENT3: light(SYSTEM1)
    def test_get_readings_for_plot6(self):
        davAPI = DavAPI(self.conn)
        views = analyticsViews.get_conn()
        system_uid_list = ["3ddb948a5afe11e5a2ac000c29b92d09","b9cf213a8efa11e587db000c29b92d09"]
        msr_id_list = [1, 5]
        expected_result = '{"response": [{"system_uid": "3ddb948a5afe11e5a2ac000c29b92d09", "name": "ISB 5", "measurement": [{"values": [], "type": "alkalinity"}, {"values": [{"y": 0.0, "x": 0, "date": "2015-09-14 18:31:17"}, {"y": 0.0, "x": 1, "date": "2015-09-14 19:31:17"}, {"y": 0.0, "x": 2, "date": "2015-09-14 20:31:16"}, {"y": 0.0, "x": 3, "date": "2015-09-14 21:31:17"}, {"y": 0.0, "x": 4, "date": "2015-09-14 22:31:17"}, {"y": 0.0, "x": 5, "date": "2015-09-14 23:31:17"}, {"y": 0.0, "x": 6, "date": "2015-09-15 00:31:17"}, {"y": 0.0, "x": 7, "date": "2015-09-15 01:31:17"}, {"y": 0.0, "x": 8, "date": "2015-09-15 02:31:17"}, {"y": 0.0, "x": 9, "date": "2015-09-15 03:31:14"}, {"y": 0.0, "x": 10, "date": "2015-09-15 04:31:17"}, {"y": 0.0, "x": 11, "date": "2015-09-15 05:31:17"}, {"y": 0.0, "x": 12, "date": "2015-09-15 06:31:17"}, {"y": 0.0, "x": 13, "date": "2015-09-15 07:31:17"}, {"y": 0.0, "x": 14, "date": "2015-09-15 08:31:17"}, {"y": 0.0, "x": 15, "date": "2015-09-15 09:31:17"}, {"y": 0.0, "x": 16, "date": "2015-09-15 10:31:17"}, {"y": 0.0, "x": 17, "date": "2015-09-15 11:31:16"}, {"y": 0.0, "x": 18, "date": "2015-09-15 12:31:17"}, {"y": 0.0, "x": 19, "date": "2015-09-15 13:31:17"}, {"y": 0.0, "x": 20, "date": "2015-09-15 14:31:17"}, {"y": 0.0, "x": 21, "date": "2015-09-15 15:31:17"}, {"y": 0.0, "x": 22, "date": "2015-09-15 16:31:17"}, {"y": 0.0, "x": 23, "date": "2015-09-15 17:31:14"}, {"y": 0.0, "x": 24, "date": "2015-09-15 18:30:42"}, {"y": 0.0, "x": 25, "date": "2015-09-15 19:31:17"}, {"y": 0.0, "x": 26, "date": "2015-09-15 20:31:17"}, {"y": 0.0, "x": 27, "date": "2015-09-15 21:31:17"}, {"y": 0.0, "x": 28, "date": "2015-09-15 22:31:16"}, {"y": 0.0, "x": 29, "date": "2015-09-15 23:31:17"}, {"y": 0.0, "x": 30, "date": "2015-09-16 00:31:17"}, {"y": 0.0, "x": 31, "date": "2015-09-16 01:31:14"}, {"y": 0.0, "x": 32, "date": "2015-09-16 02:31:14"}, {"y": 0.0, "x": 33, "date": "2015-09-16 03:31:16"}, {"y": 0.0, "x": 34, "date": "2015-09-16 04:31:17"}, {"y": 0.0, "x": 35, "date": "2015-09-16 05:31:17"}, {"y": 0.0, "x": 36, "date": "2015-09-16 06:31:17"}, {"y": 0.0, "x": 37, "date": "2015-09-16 07:31:17"}, {"y": 0.0, "x": 38, "date": "2015-09-16 08:31:17"}, {"y": 0.0, "x": 39, "date": "2015-09-16 09:31:17"}, {"y": 0.0, "x": 40, "date": "2015-09-16 10:31:16"}, {"y": 0.0, "x": 41, "date": "2015-09-16 11:31:17"}, {"y": 0.0, "x": 42, "date": "2015-09-16 12:31:17"}, {"y": 0.0, "x": 43, "date": "2015-09-16 13:31:17"}, {"y": 0.0, "x": 44, "date": "2015-09-16 14:31:17"}, {"y": 0.0, "x": 45, "date": "2015-09-16 15:31:17"}, {"y": 0.0, "x": 46, "date": "2015-09-16 16:31:15"}, {"y": 0.0, "x": 47, "date": "2015-09-16 17:31:15"}, {"y": 0.0, "x": 48, "date": "2015-09-16 18:31:17"}, {"y": 0.0, "x": 49, "date": "2015-09-16 19:31:15"}, {"y": 0.0, "x": 50, "date": "2015-09-16 20:31:15"}, {"y": 0.0, "x": 51, "date": "2015-09-16 21:31:17"}, {"y": 0.0, "x": 52, "date": "2015-09-16 22:31:16"}, {"y": 0.0, "x": 53, "date": "2015-09-16 23:31:17"}, {"y": 0.0, "x": 54, "date": "2015-09-17 00:31:17"}, {"y": 0.0, "x": 55, "date": "2015-09-17 01:31:17"}, {"y": 0.0, "x": 56, "date": "2015-09-17 02:31:15"}, {"y": 0.0, "x": 57, "date": "2015-09-17 03:31:14"}, {"y": 0.0, "x": 58, "date": "2015-09-17 04:31:17"}, {"y": 0.0, "x": 59, "date": "2015-09-17 05:31:17"}, {"y": 0.0, "x": 60, "date": "2015-09-17 06:31:17"}, {"y": 0.0, "x": 61, "date": "2015-09-17 07:31:17"}, {"y": 0.0, "x": 62, "date": "2015-09-17 08:31:17"}, {"y": 0.0, "x": 63, "date": "2015-09-17 09:31:17"}, {"y": 0.0, "x": 64, "date": "2015-09-17 10:31:17"}, {"y": 0.0, "x": 65, "date": "2015-09-17 11:31:16"}, {"y": 0.0, "x": 66, "date": "2015-09-17 12:31:17"}, {"y": 0.0, "x": 67, "date": "2015-09-17 13:31:17"}, {"y": 0.0, "x": 68, "date": "2015-09-17 14:31:14"}, {"y": 0.0, "x": 69, "date": "2015-09-17 15:31:17"}, {"y": 0.0, "x": 70, "date": "2015-09-17 16:31:17"}, {"y": 0.0, "x": 71, "date": "2015-09-17 17:31:17"}, {"y": 0.0, "x": 72, "date": "2015-09-17 18:31:17"}, {"y": 0.0, "x": 73, "date": "2015-09-17 19:31:17"}, {"y": 0.0, "x": 74, "date": "2015-09-17 20:31:17"}, {"y": 0.0, "x": 75, "date": "2015-09-17 21:31:17"}, {"y": 0.0, "x": 76, "date": "2015-09-17 22:31:15"}, {"y": 0.0, "x": 77, "date": "2015-09-17 23:31:17"}, {"y": 0.0, "x": 78, "date": "2015-09-18 00:31:17"}, {"y": 0.0, "x": 79, "date": "2015-09-18 01:31:17"}, {"y": 0.0, "x": 80, "date": "2015-09-18 02:31:17"}, {"y": 0.0, "x": 81, "date": "2015-09-18 03:31:17"}, {"y": 0.0, "x": 82, "date": "2015-09-18 04:31:17"}, {"y": 0.0, "x": 83, "date": "2015-09-18 05:31:15"}, {"y": 0.0, "x": 84, "date": "2015-09-18 06:31:17"}, {"y": 0.0, "x": 85, "date": "2015-09-18 07:31:17"}, {"y": 0.0, "x": 86, "date": "2015-09-18 08:31:16"}, {"y": 0.0, "x": 87, "date": "2015-09-18 09:31:16"}, {"y": 0.0, "x": 88, "date": "2015-09-18 10:31:17"}, {"y": 0.0, "x": 89, "date": "2015-09-18 11:31:14"}, {"y": 0.0, "x": 90, "date": "2015-09-18 12:31:16"}, {"y": 0.0, "x": 91, "date": "2015-09-18 13:31:17"}, {"y": 0.0, "x": 92, "date": "2015-09-18 14:31:17"}, {"y": 0.0, "x": 93, "date": "2015-09-18 15:31:17"}, {"y": 0.0, "x": 94, "date": "2015-09-18 16:31:17"}, {"y": 0.0, "x": 95, "date": "2015-09-18 17:31:17"}, {"y": 0.0, "x": 96, "date": "2015-09-18 18:31:16"}, {"y": 0.0, "x": 97, "date": "2015-09-18 19:31:14"}, {"y": 0.0, "x": 98, "date": "2015-09-18 20:31:17"}, {"y": 0.0, "x": 99, "date": "2015-09-18 21:31:17"}, {"y": 0.0, "x": 100, "date": "2015-09-18 22:31:17"}, {"y": 0.0, "x": 101, "date": "2015-09-18 23:31:17"}, {"y": 0.0, "x": 102, "date": "2015-09-19 00:31:17"}, {"y": 0.0, "x": 103, "date": "2015-09-19 01:31:17"}, {"y": 0.0, "x": 104, "date": "2015-09-19 02:31:14"}, {"y": 0.0, "x": 105, "date": "2015-09-19 03:31:17"}, {"y": 0.0, "x": 106, "date": "2015-09-19 04:31:17"}, {"y": 0.0, "x": 107, "date": "2015-09-19 05:31:17"}, {"y": 0.0, "x": 108, "date": "2015-09-19 06:31:17"}, {"y": 0.0, "x": 109, "date": "2015-09-19 07:31:15"}, {"y": 0.0, "x": 110, "date": "2015-09-19 08:31:17"}, {"y": 0.0, "x": 111, "date": "2015-09-19 09:31:17"}, {"y": 0.0, "x": 112, "date": "2015-09-19 10:31:17"}, {"y": 0.0, "x": 113, "date": "2015-09-19 11:31:17"}, {"y": 0.0, "x": 114, "date": "2015-09-19 12:31:17"}, {"y": 0.0, "x": 115, "date": "2015-09-19 13:31:17"}, {"y": 0.0, "x": 116, "date": "2015-09-19 14:31:17"}, {"y": 0.0, "x": 117, "date": "2015-09-19 15:31:17"}, {"y": 0.0, "x": 118, "date": "2015-09-19 16:31:16"}, {"y": 0.0, "x": 119, "date": "2015-09-19 17:31:16"}, {"y": 0.0, "x": 120, "date": "2015-09-19 18:31:17"}, {"y": 0.0, "x": 121, "date": "2015-09-19 19:31:17"}, {"y": 0.0, "x": 122, "date": "2015-09-19 20:31:17"}, {"y": 0.0, "x": 123, "date": "2015-09-19 21:31:15"}, {"y": 0.0, "x": 124, "date": "2015-09-19 22:31:17"}, {"y": 0.0, "x": 125, "date": "2015-09-19 23:31:16"}, {"y": 0.0, "x": 126, "date": "2015-09-20 00:31:17"}, {"y": 0.0, "x": 127, "date": "2015-09-20 01:31:17"}, {"y": 0.0, "x": 128, "date": "2015-09-20 02:31:17"}, {"y": 0.0, "x": 129, "date": "2015-09-20 03:31:17"}, {"y": 0.0, "x": 130, "date": "2015-09-20 04:31:17"}, {"y": 0.0, "x": 131, "date": "2015-09-20 05:31:17"}, {"y": 0.0, "x": 132, "date": "2015-09-20 06:31:17"}, {"y": 0.0, "x": 133, "date": "2015-09-20 07:31:17"}, {"y": 0.0, "x": 134, "date": "2015-09-20 08:31:17"}, {"y": 0.0, "x": 135, "date": "2015-09-20 09:31:17"}, {"y": 0.0, "x": 136, "date": "2015-09-20 10:31:16"}, {"y": 0.0, "x": 137, "date": "2015-09-20 11:31:15"}, {"y": 0.0, "x": 138, "date": "2015-09-20 12:31:17"}, {"y": 0.0, "x": 139, "date": "2015-09-20 13:31:17"}, {"y": 0.0, "x": 140, "date": "2015-09-20 14:31:17"}, {"y": 0.0, "x": 141, "date": "2015-09-20 15:31:17"}, {"y": 0.0, "x": 142, "date": "2015-09-20 16:31:17"}, {"y": 0.0, "x": 143, "date": "2015-09-20 17:31:15"}, {"y": 0.0, "x": 144, "date": "2015-09-20 18:31:17"}, {"y": 0.0, "x": 145, "date": "2015-09-20 19:31:16"}, {"y": 0.0, "x": 146, "date": "2015-09-20 20:31:17"}, {"y": 0.0, "x": 147, "date": "2015-09-20 21:31:17"}, {"y": 0.0, "x": 148, "date": "2015-09-20 22:31:14"}, {"y": 0.0, "x": 149, "date": "2015-09-20 23:31:17"}, {"y": 0.0, "x": 150, "date": "2015-09-21 00:31:17"}, {"y": 0.0, "x": 151, "date": "2015-09-21 01:31:17"}, {"y": 0.0, "x": 152, "date": "2015-09-21 02:31:17"}, {"y": 0.0, "x": 153, "date": "2015-09-21 03:31:14"}, {"y": 0.0, "x": 154, "date": "2015-09-21 04:31:15"}, {"y": 0.0, "x": 155, "date": "2015-09-21 05:31:17"}, {"y": 0.0, "x": 156, "date": "2015-09-21 06:31:14"}, {"y": 0.0, "x": 157, "date": "2015-09-21 07:31:15"}, {"y": 0.0, "x": 158, "date": "2015-09-21 08:31:17"}, {"y": 0.0, "x": 159, "date": "2015-09-21 09:31:17"}, {"y": 0.0, "x": 160, "date": "2015-09-21 10:31:17"}, {"y": 0.0, "x": 161, "date": "2015-09-21 11:31:17"}, {"y": 0.0, "x": 162, "date": "2015-09-21 12:31:17"}, {"y": 0.0, "x": 163, "date": "2015-09-21 13:31:17"}, {"y": 0.0, "x": 164, "date": "2015-09-21 14:31:17"}, {"y": 0.0, "x": 165, "date": "2015-09-21 15:31:17"}, {"y": 0.0, "x": 166, "date": "2015-09-21 16:31:17"}, {"y": 0.0, "x": 167, "date": "2015-09-21 17:31:17"}, {"y": 0.0, "x": 168, "date": "2015-09-21 18:21:27"}], "type": "light"}]}, {"system_uid": "b9cf213a8efa11e587db000c29b92d09", "name": "bluemo", "measurement": [{"values": [{"y": 30.0, "x": 0, "date": "2016-01-15 22:15:00"}, {"y": 20.0, "x": 95, "date": "2016-01-19 22:10:00"}, {"y": 20.0, "x": 119, "date": "2016-01-20 21:20:00"}, {"y": 20.0, "x": 142, "date": "2016-01-21 20:43:00"}], "type": "alkalinity"}, {"values": [], "type": "light"}]}]}'
        actual_result = analyticsViews.get_readings_for_tsplot(system_uid_list,msr_id_list)
        print actual_result
        self.assertEquals(expected_result, actual_result)


if __name__ == '__main__':
    unittest.main()
