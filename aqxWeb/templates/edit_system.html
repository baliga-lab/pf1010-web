{% extends "base.html" %}
{% block title %}Edit System{% endblock %}
{% block content %}
<div>
  <form id="edit_form">
    <input type="hidden" name="uid" value="{{system_data['UID']}}"></input>
    <h2>Edit System</h2>
    <div class="form-group">
      <label>System Name</label>
      <input type="text" class="form-control" name="name" placeholder="System Name" value="{{system_data['name']}}" required>
    </div>

    {#
    <div class="form-group">
      <div class="row">
        <div class="col-xs-8">
          <label>Crop</label>
          <div id="select_crops"></div>
        </div>
        <div class="col-xs-4">
          <label>&nbsp;</label>
          <input type="number" min="0" class="form-control" name="cropCount" placeholder="Number of Crops" required>
        </div>
      </div>
    </div>
    <div id="newcrop"></div>
    <div style="height: 2.5em"><a id="addcrop" href="javascript:void(0)">Add another crop</a></div>
    #}
    <div class="form-group">
      <button type="submit" class="btn btn-green">Save Changes</button>
    </div>
  </form>
</div>
{% endblock %}
{% block scripts %}
    {{ super() }}
    <script type="text/javascript" src="{{ url_for('frontend.static', filename='js/edit_system.js') }}"></script>
    <script>
      var crops = [
        {% for crop in enums['crops'] %}{ "id": {{ crop.ID }}, "name": "{{ crop.name }}" },{% endfor %}
      ];
      var organisms = [
        {% for o in enums['organisms'] %}{ "id": {{ o.ID }}, "name": "{{ o.name }}" },{% endfor %}
      ];
      $(document).ready(function () {
        /*
        if (!Modernizr.inputtypes.date) {
          $('#start-date').datepicker({dateFormat: "yy-MM-dd"});
        }
        */
        aqx_editsystem.make_select('#select_crops', 'cropID', crops, false);
        aqx_editsystem.make_select('#select_organism', 'organismID', organisms, false);
        $('#edit_form').submit(function () { aqx_editsystem.update("{{url_for('frontend.update_system', system_uid=system_data['UID'])}}"); });
      });
    </script>
{% endblock %}
